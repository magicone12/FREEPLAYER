<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MP4 & MPD Player</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 20px;
    }
    video {
      width: 80%;
      max-width: 900px;
      border: 3px solid #444;
    }
    select {
      margin-top: 15px;
      padding: 6px 10px;
      font-size: 16px;
    }
  </style>
  <!-- Shaka Player -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.8/shaka-player.compiled.js"></script>
</head>
<body>

  <h1>MP4 + DASH (MPD) Player</h1>

  <video id="video" controls></video>
  <br>

  <select id="sourceSelect">
    <option value="mp4">Play MP4</option>
    <option value="mpd">Play DASH (.mpd)</option>
  </select>

  <script>
    document.addEventListener('DOMContentLoaded', () => {

      const video = document.getElementById('video');
      const select = document.getElementById('sourceSelect');

      // URLs
      const urls = {
        mp4: "https://ia600802.us.archive.org/29/items/if-only-lea-salonga-lyrics-720-p-hd/If%20Only%20-%20Lea%20Salonga%20-%20Lyrics%28720P_HD%29.ia.mp4",
        mpd: "https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_animax_sd_new/default/index.mpd"
      };

      // Initialize Shaka
      shaka.polyfill.installAll();

      if (shaka.Player.isBrowserSupported()) {
        const player = new shaka.Player(video);

        player.addEventListener('error', (e) => {
          console.error("Shaka Error:", e.detail);
        });

        function loadSource(type) {
          if (type === 'mp4') {
            // Normal MP4
            video.src = urls.mp4;
            video.play();
          } else {
            // DASH
            player.load(urls.mpd).then(() => {
              console.log('DASH Loaded successfully');
            }).catch((err) => {
              console.error('Failed to load DASH:', err);
            });
          }
        }

        // initial load
        loadSource(select.value);

        // change event
        select.addEventListener('change', () => {
          video.pause();
          loadSource(select.value);
        });

      } else {
        alert("Sorry, your browser does not support Shaka Player.");
      }
    });
  </script>

</body>
</html>
