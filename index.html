<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shaka Player Demo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 20px;
        }

        #playerContainer {
            margin-bottom: 20px;
        }

        video {
            width: 80%;
            max-width: 800px;
            height: auto;
            border: 2px solid #444;
            border-radius: 8px;
            background-color: #000;
        }

        .channelBtn {
            display: inline-block;
            width: 180px;
            margin: 10px;
            cursor: pointer;
            border: 2px solid #444;
            border-radius: 8px;
            overflow: hidden;
            transition: 0.3s;
            vertical-align: top;
        }

        .channelBtn:hover {
            border-color: #fff;
        }

        .channelBtn img {
            width: 100%;
            height: auto;
        }

        .channelCode {
            padding: 8px;
            background-color: #222;
            font-weight: bold;
        }
    </style>
</head>
<body>

<h1>Shaka Player Demo</h1>

<div id="playerContainer">
    <video id="videoPlayer" controls poster="" autoplay></video>
</div>

<!-- Video Thumbnails -->
<div class="channelBtn" data-manifest="https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd" data-type="DASH" data-poster="https://storage.googleapis.com/shaka-demo-assets/angel-one.jpg">
    <img src="https://storage.googleapis.com/shaka-demo-assets/angel-one.jpg" alt="Angel One">
    <div class="channelCode">Angel One (DASH)</div>
</div>

<div class="channelBtn" data-manifest="https://storage.googleapis.com/shaka-demo-assets/ForBiggerJoyrides.mp4" data-type="MP4" data-poster="https://storage.googleapis.com/shaka-demo-assets/ForBiggerJoyrides.jpg">
    <img src="https://storage.googleapis.com/shaka-demo-assets/ForBiggerJoyrides.jpg" alt="For Bigger Joyrides">
    <div class="channelCode">For Bigger Joyrides (MP4)</div>
</div>

<!-- Shaka Player library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.5/shaka-player.compiled.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const video = document.getElementById('videoPlayer');
    const buttons = document.querySelectorAll('.channelBtn');

    // Initialize Shaka Player
    const player = new shaka.Player(video);

    // Listen for errors
    player.addEventListener('error', function(event) {
        console.error('Shaka Player Error:', event.detail);
        alert('Error playing video. Check console for details.');
    });

    buttons.forEach(btn => {
        btn.addEventListener('click', () => {
            const manifest = btn.getAttribute('data-manifest');
            const type = btn.getAttribute('data-type');
            const poster = btn.getAttribute('data-poster') || '';

            video.poster = poster;

            if(type === "MP4") {
                // Direktang MP4
                video.src = manifest;
                video.load();
                video.play();
            } else if(type === "DASH") {
                // DASH gamit Shaka Player
                player.load(manifest).then(() => {
                    video.play();
                }).catch(err => {
                    console.error(err);
                    alert('Failed to load DASH video');
                });
            }
        });
    });
});
</script>

</body>
</html>
